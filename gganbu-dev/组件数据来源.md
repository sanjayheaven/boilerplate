# 组件数据来源

## 将数据获取写进组件内（State）

也就是说，这个业务组件能够在自身初始化的时候就可以拿到所需的数据。  
这种方式将会出现的问题是：

- 页面存在 n 个 A 组件，将发起 n 次数据请求
- 页面存在 n 个 A 和 m 个 B，将发起 n+m 次数据请求

针对第一个，可以用**请求缓存**解决，同一组件内，所要求数据基本相同。  
第二个，从前端角度该没有办法避免 http 的请求次数，至少 1+1 次数据请求，如果组件类型增加，请求次数还会增加。

## 由当前页面-父组件传入（Prop）

这种方式，是组件体系结构比较推崇的方式。  
但是也有弊端，如果某个组件被多次使用，在不同页面多次出现，那就需要在不同页面多次获取信息。  
针对这个问题，有两个解决方案，

- 数据集中管理
  - 利用一些集中状态管理方案，比如 Vuex，Redux 等去保存当前应用下的所需的这些数据。
    - 可以是应用初始化时获取数据
    - 也可以是，第一次将异步逻辑写入 Vue、Redux 中，判断是否存在所需数据，如有直接返回，没有请求所需数据
- 每次进行数据请求返回
  - 这种方式下，要优化的话，只能将这部分数据请求，在后端抽象成某个接口，在不同页面发起初始化请求的时候，都需要带上这个服务的数据。
    - 进而可以对服务进行缓存
